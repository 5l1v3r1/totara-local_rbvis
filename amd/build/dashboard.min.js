define(["jquery","jqueryui","local_rbvis/plotly","local_rbvis/plotly_renderers","local_rbvis/pivot"],function(a){var b=a("#dashboard"),c=a("#spinner");a(document).ajaxStart(function(){c.css("display","flex"),c.show()}).ajaxStop(function(){c.hide(),c.css("display","none")});var d=function(c){var d=a.extend(a.pivotUtilities.renderers,a.pivotUtilities.plotly_renderers),e={plotly:{autosize:!0},plotlyConfig:{scrollZoom:!0,editable:!0,displayModeBar:!0,responsive:!0}};b.pivotUI(c,{unusedAttrsVertical:!1,autoSortUnusedAttrs:!0,renderers:d,rendererOptions:e})};return{init:function(){var c=M.cfg.wwwroot+"/local/rbvis/ajax.php",e=a("#tfiid_report_local_rbvis_form_report_selector");e.change(function(){e.val()<=0?b.html(""):a.post(c,{id:e.val()}).done(d)})}}});